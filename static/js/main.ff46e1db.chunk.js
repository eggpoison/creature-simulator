(this["webpackJsonpcreature-simulator"]=this["webpackJsonpcreature-simulator"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,i){var n={"./egg/egg-0.png":18,"./egg/egg-1.png":19,"./egg/egg-2.png":20,"./egg/egg-3.png":21,"./egg/egg-4.png":22,"./heart/heart-0.png":23,"./heart/heart-1.png":24,"./heart/heart-2.png":25,"./heart/heart-3.png":26};function a(e){var t=s(e);return i(t)}function s(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id=17},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAEBJREFUKFOFT1sKACAIm/c/9MJyphTlh+heoqEXYzXBOQAguXizCe9WyXSGSAnpvgkOsoo84Stww/OEEvVi+3AAKPcaB3YCGM0AAAAASUVORK5CYII="},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAE1JREFUKFNtj0sSACAIQvHa7j03jRX2bdGU4EMN5+H8msr1AEBy6Ga9vK5drM5pEoHujoioQFHSUOhrnh71NaSQ88iQjQ9ljxBZKx4bNv3HHQfqLQCjAAAAAElFTkSuQmCC"},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAE5JREFUKFNdj9EWACAEQ+e7PftuHTJRD53Y3Eawj1cpbPcDgLtfXSTb75piT5aJhBwlYVLC0GhVhZl1qvhqGSY+aDQU/QYkhUHXFt/KqR3dtSMH1GudvAAAAABJRU5ErkJggg=="},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAFBJREFUKFNdT0kSACAIwnd71m/baGFZhyYhFgXzxBmFcD8ARMTmRQq+10u28nyiQ0npoKpw9232W38xlVPZqTKz7pBYdumIV0mSEezFFceGC34GKQfwUlcMAAAAAElFTkSuQmCC"},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAFFJREFUKFNtT0EOACAI0m/rWb9ti6Jyq4MrIBCVfmo/lfC5iEhVLV4V8B0k3V0ioonogK90mMLMXGYfawh3DHKQPYF3B2In4iXNrEWwESu2hgOIACwH4GvOyAAAAABJRU5ErkJggg=="},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAADxJREFUKFOFTlsKACAI2+5/6GLWYJGg+CF7SgxD8asWIMC8CzPQBckwC7IiU+S+tQfOKpOPwKIkP0H36AZOTA4J8eyzugAAAABJRU5ErkJggg=="},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAADhJREFUKFNjZCAAGIlWcJiB4b8tAwMjjIZpBJsAEkQ3CaQYJAa3AlkRTBJFAcwkZEkMBdgcTNAXALJPCgmBiBW0AAAAAElFTkSuQmCC"},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAACpJREFUKFNjZCAAGKmroJeB4X8xAwOKqXAOSBJmHbIiFNV4TcDlWIK+AADFugYJ3JGn6wAAAABJRU5ErkJggg=="},function(e,t,i){"use strict";i.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAABtJREFUKFNjZCAAGOmsIISB4f8aBgYUa+ngBgDt+AIJegq8GAAAAABJRU5ErkJggg=="},,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t),i.d(t,"hideMask",(function(){return De})),i.d(t,"showMask",(function(){return Ge}));var n=i(2),a=i.n(n),s=i(10),r=i.n(s),o=i(1),c=i(3),l=i(4),u=i(9),h=i(8),d=i(5),f=function(){function e(t,i){Object(c.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=i}return Object(l.a)(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lerp",value:function(t,i){return new e(x(this.x,t.x,i),x(this.y,t.y,i))}},{key:"distanceFrom",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"angleBetween",value:function(e){return Math.atan2(e.y-this.y,e.x-this.x)}},{key:"convertToPolar",value:function(t){var i=t||new e(0,0),n=this.distanceFrom(i),a=this.angleBetween(i);return new v(n,a)}},{key:"randomOffset",value:function(e){var t=g(0,e),i=g(0,360),n=new v(t,i);return this.add(n.convertToCartesian())}},{key:"copy",value:function(){return new e(this.x,this.y)}}]),e}(),v=function(){function e(t,i){Object(c.a)(this,e),this.magnitude=void 0,this.direction=void 0,this.magnitude=t,this.direction=i}return Object(l.a)(e,[{key:"convertToCartesian",value:function(){var e=Math.cos(this.direction)*this.magnitude,t=Math.sin(this.direction)*this.magnitude;return new f(e,t)}}]),e}();function p(e){var t=document.getElementById(e);if(!t)throw new Error("ungaming: tried to find element with an id of '".concat(e,"' but could not find any.'"));return t}function m(e,t){if(e>=t)throw new Error("Min of '".concat(e,"' is greater than max of '").concat(t,"'"));return Math.floor(Math.random()*(t-e))+e}function g(e,t){if(e>=t)throw new Error("Min of '".concat(e,"' is greater than max of '").concat(t,"'"));return Math.random()*(t-e)+e}function b(e){return e[m(0,e.length)]}function x(e,t,i){return(1-i)*e+i*t}function y(e,t){var i=Math.pow(10,t);return Math.round((e+Number.EPSILON)*i)/i}function j(e){var t=e.length,i=e.reduce((function(e,t){return e+t}))/t,n=e.map((function(e){return Math.pow(e-i,2)})).reduce((function(e,t){return e+t}))/t;return Math.sqrt(n)}var A=function(){function e(t){Object(c.a)(this,e),this._hex=void 0,this._rgb=void 0,this.hexDigits="0123456789abcdef".split(""),"string"===typeof t?(this._hex=t.toLowerCase(),7===this._hex.length&&(this._hex=this._hex.substring(1,7)),this._rgb=this.getRGB()):(this._rgb=t,this._hex=this.getHex())}return Object(l.a)(e,[{key:"hex",get:function(){return"#"+this._hex}},{key:"rgb",get:function(){var e=Object(d.a)(this._rgb,3),t=e[0],i=e[1],n=e[2];return"rgb(".concat(t,", ").concat(i,", ").concat(n,")")}},{key:"getRGB",value:function(){for(var e=[0,0,0],t=0;t<3;t++){var i=this.hexDigits.indexOf(this._hex[2*t]),n=this.hexDigits.indexOf(this._hex[2*t+1]);e[t]=16*i+n}return e}},{key:"getHex",value:function(){for(var e="",t=0;t<3;t++){var i=this._rgb[t],n=i%16,a=(i-n)/16;e+=this.hexDigits[a]+this.hexDigits[n]}return e}},{key:"darken",value:function(t){return new e(this._rgb.map((function(e){return Math.round(e*(1-t))})))}},{key:"desaturate",value:function(t){var i=this._rgb.slice(),n=.3086*i[0]+.6094*i[1]+.082*i[2];return i[0]=Math.round(x(i[0],n,t)),i[1]=Math.round(x(i[1],n,t)),i[2]=Math.round(x(i[2],n,t)),new e([i[0],i[1],i[2]])}}]),e}(),O=[],w=new Array,k=function(){var e=document.createElement("div");return e.className="cell",e},S=function(){var e=document.createElement("div");return e.style.height="".concat(ke.cellSize,"px"),e.className="cell-row",e};function N(){!function(){var e=p("board");e.classList.remove("hidden"),e.style.setProperty("--cell-size","".concat(ke.cellSize,"px")),e.style.setProperty("--cell-border-size","".concat(ke.cellBorderSize,"px"));var t=ke.boardSize.width*ke.cellSize;e.style.width="".concat(t,"px");var i=ke.boardSize.height*ke.cellSize;e.style.height="".concat(i,"px");for(var n=0;n<ke.boardSize.height;n++){var a=S();e.appendChild(a),w.push(a);for(var s=0;s<ke.boardSize.width;s++){var r=k();a.appendChild(r),(n+s)%2===0?r.classList.add("cell-1"):r.classList.add("cell-2");var o=new Array;O.push(o)}}}(),ke.start(),p("title-options-container").classList.add("hidden")}var C=function(){function e(t,i){Object(c.a)(this,e),this.cellNumber=void 0,this.position=void 0,this.velocity=void 0,this.age=void 0,this.lifespan=void 0,this.element=void 0,this.position=t,this.velocity=new f(0,0),this.age=0;for(var n=0,a=Object.entries(i);n<a.length;n++){var s=a[n];this[s[0]]=s[1]}this.element=this.instantiate(),this.createEntity(),this.updatePosition(),this.cellNumber=this.calculateCell()}return Object(l.a)(e,[{key:"createEntity",value:function(){var e,t;return p("board").appendChild(this.element),"number"===typeof this.size?(e=this.size,t=this.size):(e=this.size.x,t=this.size.y),this.element.style.width=e+"px",this.element.style.height=t+"px",this.element}},{key:"tick",value:function(){this.age++>=this.lifespan?this.die():(this.position=this.position.add(this.velocity),this.calculateCell(),this.updatePosition())}},{key:"updatePosition",value:function(){this.element.style.left="".concat(this.position.x,"px"),this.element.style.top="".concat(this.position.y,"px")}},{key:"die",value:function(){this.element.remove();var e,t=Object(o.a)(O);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=i.indexOf(this);-1!==n&&i.splice(n,1)}}catch(a){t.e(a)}finally{t.f()}}},{key:"calculateCell",value:function(){var e=Math.floor(this.position.x/ke.cellSize),t=Math.floor(this.position.y/ke.cellSize),i=ke.boardSize.width*ke.boardSize.height-1,n=t*ke.boardSize.width+e;n=Math.min(Math.max(n,0),i),this.cellNumber=n;for(var a=0;a<O.length;a++){var s=O[a];if(s.includes(this)){var r=s.indexOf(this);s.splice(r,1)}}return void 0===O[n]&&(console.log(O),console.log(n)),O[n].push(this),n}},{key:"getSurroundingCells",value:function(e){for(var t=new Array,i=ke.boardSize.width,n=0;n<2*e+1;n++)for(var a=0;a<2*e+1;a++){var s=(n-e)*i+(a-e)+this.cellNumber;if(!(Math.abs(this.cellNumber%ke.boardSize.width-s%ke.boardSize.width)>1)){var r=ke.boardSize.width*ke.boardSize.height-1;s<0||s>r||t.push(O[s])}}return t}},{key:"getEntitiesInCells",value:function(e){var t,i=this,n=new Array,a=Object(o.a)(e);try{for(a.s();!(t=a.n()).done;){var s=t.value.filter((function(e){return!(e===i)}));n=n.concat(s)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"isCollidingWithEntity",value:function(e){var t=this.position.distanceFrom(e.position);return"number"===typeof this.size?t-this.size/2<=0:"number"===typeof e.size?t-this.size.x/2-e.size/2<=0:t-this.size.x/2-e.size.x/2<=0}}],[{key:"count",value:function(e){var t,i=0,n=Object(o.a)(O);try{for(n.s();!(t=n.n()).done;){var a,s=t.value,r=Object(o.a)(s);try{for(r.s();!(a=r.n()).done;){var c=a.value;e.prototype.isPrototypeOf(c)&&i++}}catch(l){r.e(l)}finally{r.f()}}}catch(l){n.e(l)}finally{n.f()}return i}},{key:"randomPositionInCell",value:function(e){var t=e%ke.boardSize.width,i=Math.floor(e/ke.boardSize.width),n=g(0,ke.cellSize),a=g(0,ke.cellSize);return new f(t*ke.cellSize+n,i*ke.cellSize+a)}}]),e}();function M(e){var t={lifespan:10*ke.tps,size:8},i=C.randomPositionInCell(e);new R(i,t)}var E,z,R=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(l.a)(i,[{key:"instantiate",value:function(){var e=document.createElement("div");e.className="fruit";var t=b(["red","green","pink"]);return e.style.backgroundColor=t,e}}]),i}(C),T=R,L=new Array,F=function(){function e(t,i,n,a,s,r){Object(c.a)(this,e),this.name=void 0,this.position=void 0,this.element=void 0,this.width=void 0,this.height=void 0,this.numFrames=void 0,this.frame=0,this.ticksPerFrame=void 0,this.name=t,this.width=a,this.height=s,this.numFrames=i,this.ticksPerFrame=n,this.position=r,this.init(),this.updateBackgroundImage(),L.push(this)}return Object(l.a)(e,[{key:"init",value:function(){this.element=document.createElement("div"),this.element.className="game-image",this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",p("board").appendChild(this.element),this.element.style.backgroundSize="".concat(this.width,"px ").concat(this.height,"px"),this.element.style.top=this.position.y+"px",this.element.style.left=this.position.x+"px"}},{key:"updateBackgroundImage",value:function(){var e=Math.floor(this.frame),t=i(17)("./".concat(this.name,"/").concat(this.name,"-").concat(e,".png")).default;this.element.style.backgroundImage="url(".concat(t,")")}},{key:"tick",value:function(){this.frame+=1/this.ticksPerFrame,this.frame>=this.numFrames?this.die():this.updateBackgroundImage()}},{key:"die",value:function(){this.element.remove(),L.splice(L.indexOf(this),1)}}]),e}(),P=i(7),I=i(6),B=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e,n,a,s){var r;return Object(c.a)(this,i),(r=t.call(this,e,n)).generation=void 0,r.generation=s,r.creatureAttributes=a,r}return Object(l.a)(i,[{key:"instantiate",value:function(){var e=Math.floor(this.lifespan/5);return new F("egg",5,e,this.size,this.size,this.position).element}},{key:"tick",value:function(){Object(P.a)(Object(I.a)(i.prototype),"tick",this).call(this);var e=1.25*Math.sin(ke.ticks*ke.tps);this.element.style.transform="translate(-50%, -50%) rotate(".concat(e,"deg)")}},{key:"die",value:function(){Object(P.a)(Object(I.a)(i.prototype),"die",this).call(this),new q(this.position.copy(),this.creatureAttributes).stats.generation=this.generation}}]),i}(C),U=!1,V=null;function D(){U=!1,V=null,E(null)}var G={speed:{display:"speed",colour:"#eeff00",min:3,max:10,weight:1,positivelyAffectsLifespan:!1},size:{display:"size",colour:"#ff8f00",min:10,max:30,weight:1,positivelyAffectsLifespan:!0},vision:{display:"vision",colour:"#5400ff",min:25,max:75,weight:1,positivelyAffectsLifespan:!1},reproductiveRate:{display:"reproductive rate",colour:"#ff00e0",min:.5,max:2,weight:1}},Y=function(e){for(var t=10*ke.tps,i=0,n=Object.entries(G);i<n.length;i++){var a=n[i];if(a[1].positivelyAffectsLifespan){var s=e[a[0]];a[1].positivelyAffectsLifespan?t*=Math.pow(s/((a[1].min+a[1].max)/2),a[1].weight):t*=Math.pow((a[1].min+a[1].max)/2/s,a[1].weight)}}return t},J=function(e){var t=G[e];return g(t.min,t.max)},K=function(){for(var e=["Amoeba"],t=[],i=["Feeble","Crippled","Schizophrenic"].slice();0!==i.length&&Math.random()<=.4;){var n=m(0,i.length);t.push(i[n]),i.splice(n,1)}var a=t.reduce((function(e,i,n){var a=e;return n>0&&t.length-n>1?a+=", ":t.length>1&&t.length-n===1&&(a+=" and "),a+i}),""),s=Math.random()<=.3,r=b(["Glorb","James","Obama","Gnark"]);return s&&t.length>0?r+=" the "+a+" "+b(e):t.length>0?r+=" the "+a:s&&(r+=" the "+b(e)),r};function Q(){var e={name:K(),size:J("size"),speed:J("speed"),vision:J("vision"),reproductiveRate:J("reproductiveRate"),lifespan:0};e.lifespan=Y(e);var t=g(0,ke.boardSize.width*ke.cellSize),i=g(0,ke.boardSize.height*ke.cellSize),n=new f(t,i);new H(n,e)}var _=2e3,X=5e3,H=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e,n){var a;return Object(c.a)(this,i),(a=t.call(this,e,n)).speed=void 0,a.moveSpeed=void 0,a.vision=void 0,a.reproductiveRate=void 0,a.birthTime=void 0,a.isMoving=void 0,a.targetPosition=null,a.reproductiveUrge=0,a.partner=null,a.reproductionStage=0,a.lastReproductionTime=-11e3,a.stats={fruitEaten:0,generation:1},a.speed=n.speed,a.vision=n.vision,a.reproductiveRate=n.reproductiveRate,a.isMoving=!1,a.birthTime=ke.ticks,a.moveSpeed=a.calculateMoveSpeed(),a}return Object(l.a)(i,[{key:"calculateMoveSpeed",value:function(){var e=G.size.max/G.size.min/3;return this.speed/Math.pow(this.size/G.size.min/e,1.1)}},{key:"instantiate",value:function(){var e=document.createElement("div");return e.className="creature",e.innerHTML='\n      <div class="shadow"></div>\n\n      <div class="life">\n         <div class="life-bar"></div>\n\n         </div>\n      <div class="reproduction">\n         <div class="reproduction-bar"></div>\n      </div>\n      ',e.style.setProperty("--vision-size","".concat(this.vision,"px")),e.style.setProperty("--creature-size","".concat(this.size,"px")),e}},{key:"life",get:function(){return(this.lifespan-this.age)/this.lifespan*100}},{key:"updateLifebar",value:function(){var e=this.element.querySelector(".life-bar");e.style.width="".concat(this.life,"%");var t=155+this.life;e.style.backgroundColor="rgb(".concat(t,", 0, 0)")}},{key:"updateReproductionBar",value:function(){this.element.querySelector(".reproduction-bar").style.width="".concat(this.reproductiveUrge,"%")}},{key:"wantsToReproduce",get:function(){return this.reproductiveUrge>this.life&&this.reproductionStage<2}},{key:"tick",value:function(){if(Object(P.a)(Object(I.a)(i.prototype),"tick",this).call(this),0===this.reproductionStage&&1e3*(ke.ticks-this.lastReproductionTime)/ke.tps>11e3){this.element.classList.remove("abstaining");this.reproductiveUrge+=3*this.reproductiveRate/ke.tps,this.reproductiveUrge=Math.min(100,this.reproductiveUrge)}else this.reproductionStage>=2&&(this.age-=1);switch(this.updateLifebar(),this.updateReproductionBar(),null!==this.targetPosition&&(this.hasReachedTargetPosition()?this.reachTargetPosition():this.moveToTargetPosition()),this.reproductionStage){case 1:if(Math.random()<=3/ke.tps){var e=this.position.randomOffset(30);new F("heart",4,2,16,16,e)}break;case 2:if(Math.random()<=3/ke.tps)for(var t=m(4,11),n=0;n<t;n++)if(Math.random()<=.7){var a=this.position.randomOffset(40),s=m(12,24);new F("heart",4,3,s,s,a)}if(Math.random()<6/ke.tps){var r=this.position.randomOffset(20),c=m(12,18);new F("heart",4,3,c,c,r)}}var l,u=Math.floor((this.size/2+this.vision)/ke.cellSize)+1,h=Object(P.a)(Object(I.a)(i.prototype),"getSurroundingCells",this).call(this,u),d=Object(P.a)(Object(I.a)(i.prototype),"getEntitiesInCells",this).call(this,h),f=this.getEntitiesInVision(d),v=null,p=Number.MAX_SAFE_INTEGER,g=null,b=Number.MAX_SAFE_INTEGER,x=Object(o.a)(f);try{for(x.s();!(l=x.n()).done;){var y=l.value,j=y instanceof T;if(y instanceof i&&this.wantsToReproduce&&y.wantsToReproduce&&(null===y.partner||y.partner===this)){var A=this.position.distanceFrom(y.position);A<b&&(g=y,b=A)}else if(j){var O=this.position.distanceFrom(y.position);O<p&&(v=y,p=O)}Object(P.a)(Object(I.a)(i.prototype),"isCollidingWithEntity",this).call(this,y)&&(y===this.partner&&this.wantsToReproduce?this.handleReproduction():j&&this.eatFruit(y))}}catch(w){x.e(w)}finally{x.f()}if(null!==g&&this.reproductionStage<2)return this.targetPosition=g.position,this.partner=g,void(this.reproductionStage=1);if(1===this.reproductionStage)this.reproductionStage=0;else if(this.reproductionStage>=2)return;if(null===v){if(!this.isMoving){Math.random()<.95/ke.tps&&(this.targetPosition=this.findRandomPosition(h))}}else this.targetPosition=v.position}},{key:"eatFruit",value:function(e){this.stats.fruitEaten++;this.age-=10*ke.tps,this.age=Math.max(this.age,0),e.die()}},{key:"getEntitiesInVision",value:function(e){var t=this;return e.filter((function(e){return t.canSeeEntity(e)}))}},{key:"canSeeEntity",value:function(e){return this.position.distanceFrom(e.position)<=this.vision+this.size/2}},{key:"findRandomPosition",value:function(e){var t=b(e),i=O.indexOf(t);return C.randomPositionInCell(i)}},{key:"moveToTargetPosition",value:function(){this.isMoving=!0;var e=this.position.angleBetween(this.targetPosition),t=new v(this.moveSpeed,e);this===V&&function(e,t){var i=e.distanceFrom(t),n=e.angleBetween(t),a=document.createElement("div");p("board").appendChild(a),a.className="ray",a.style.transform="rotate(".concat(n,"rad)"),a.style.width=i+"px",a.style.left=e.x+"px",a.style.top=e.y+"px"}(this.position,this.targetPosition),this.velocity=t.convertToCartesian()}},{key:"hasReachedTargetPosition",value:function(){var e=new f(this.position.x-this.targetPosition.x,this.position.y-this.targetPosition.y);return this.velocity.dot(e)>0}},{key:"reachTargetPosition",value:function(){this.isMoving=!1,this.velocity=new f(0,0),this.targetPosition=null}},{key:"handleReproduction",value:function(){var e=this;this.reproduce().then((function(){return e.layEgg()}))}},{key:"reproduce",value:function(){var e=this;return new Promise((function(t){e.reproductionStage=2,e.targetPosition=null,e.velocity=new f(0,0),e.isMoving=!1,e.reproductiveUrge=0,e.element.classList.add("abstaining"),e.lastReproductionTime=ke.ticks,setTimeout((function(){t()}),_)}))}},{key:"layEgg",value:function(){var e=this;return new Promise((function(t){if(e.reproductionStage=0,0!==e.partner.reproductionStage){var i=e.generateChildGenes(e.partner),n={size:20,lifespan:5*ke.tps},a=e.position.randomOffset(10);new B(a,n,i,e.stats.generation+1)}e.partner=null,setTimeout((function(){t()}),X)}))}},{key:"generateChildGenes",value:function(e){for(var t={name:K()},i=0,n=Object.keys(G);i<n.length;i++){var a=n[i],s=Math.random()<=.5?this[a]:e[a];t[a]=s,Math.random()<=.3&&(s=this.mutateGene(a,s))}return t.lifespan=Y(t),t}},{key:"mutateGene",value:function(e,t){var i=G[e],n=(i.min+i.max)/300;return n*=g(.1,1)*ke.settings.creatureMutationRate,n*=Math.sign(Math.random()-.5),t+(n*=ke.settings.creatureMutationRate)}},{key:"die",value:function(){this===V&&D(),Object(P.a)(Object(I.a)(i.prototype),"die",this).call(this)}}]),i}(C),q=H,W=function(){function e(t,i,n,a,s){Object(c.a)(this,e),this.data=void 0,this.element=void 0,this.width=void 0,this.height=void 0,this.time=ke.ticks,this.settings=void 0,this.options=void 0,this.minY=void 0,this.maxY=void 0,this.xAxisMeasurements=10,this.timeUnit=this.calculateTimeUnit(this.time),this.width=t,this.height=i,this.data=n,this.settings=a,this.options=s,this.minY=this.calculateMinY(),this.maxY=this.calculateMaxY(),this.element=this.instantiate(),this.plotData(),this.createAxes(),this.createLabels()}return Object(l.a)(e,[{key:"instantiate",value:function(){var e=document.createElement("div");return e.className="graph",e.style.width=this.width+"px",e.style.height=this.height+"px",e}},{key:"calculateMinY",value:function(){return this.options.min?this.options.min:0}},{key:"calculateMaxY",value:function(){if(this.options.max)return this.options.max;var e=0;if("simple"===this.options.type){var t,i=Object(o.a)(this.data);try{for(i.s();!(t=i.n()).done;){var n=t.value;null!==n&&n>e&&(e=n)}}catch(c){i.e(c)}finally{i.f()}}else if("detailed"===this.options.type){var a,s=Object(o.a)(this.data);try{for(s.s();!(a=s.n()).done;){var r=a.value;null!==r&&r.max>e&&(e=r.max)}}catch(c){s.e(c)}finally{s.f()}}return e}},{key:"calculateTimeUnit",value:function(e){return e/20/this.xAxisMeasurements>60?"minutes":"seconds"}},{key:"drawPoint",value:function(e,t){var i=document.createElement("div");i.className="point",i.style.backgroundColor=t,this.element.appendChild(i),i.style.left=e.x+"px",i.style.bottom=e.y+"px"}},{key:"drawLine",value:function(e,t,i){var n=document.createElement("div");n.className="line",this.element.appendChild(n),n.style.left=e.x+"px",n.style.bottom=e.y+"px",n.style.backgroundColor=i;var a=e.distanceFrom(t),s=-e.angleBetween(t);n.style.width=a+"px",n.style.transform="rotate(".concat(s,"rad)")}},{key:"drawRect",value:function(e,t,i,n){var a=document.createElement("div");a.className="rect",this.element.appendChild(a),a.style.width=t+"px",a.style.height=i+"px",a.style.backgroundColor=n,a.style.left=e.x+"px",a.style.bottom=e.y+"px"}},{key:"drawTrangle",value:function(e,t,i,n,a){var s=document.createElement("div");s.className="triangle ".concat(a),this.element.appendChild(s),s.style.setProperty("--width",i/2+"px"),s.style.setProperty("--height",t/2+"px"),s.style.setProperty("--colour",n),s.style.left=e.x+"px",s.style.bottom=e.y+"px"}},{key:"getData",value:function(){var e;if(!this.settings.shouldExtrapolate||this.data.length<=75)return this.data;("simple"===this.options.type||"detailed"===this.options.type)&&(e=new Array);for(var t=0;t<75;t++){var i=this.data.length*t/75;if("simple"===this.options.type){var n=void 0,a=i%1;if(0===a)n=this.data[i];else{var s=this.data[Math.floor(i)],r=this.data[Math.ceil(i)];n=null===s&&null===r?null:null===s&&null!==r?r:null!==s&&null===r?s:x(s,r,a)}e.push(n)}else if("detailed"===this.options.type){var o=void 0,c=i%1;if(0===c)o=this.data[i];else{var l=this.data[Math.floor(i)],u=this.data[Math.ceil(i)];o=null===l&&null===u?null:null===l&&null!==u?u:null!==l&&null===u?l:{average:x(l.average,u.average,c),min:x(l.min,u.min,c),max:x(l.max,u.max,c),standardDeviation:x(l.standardDeviation,u.standardDeviation,c)}}e.push(o)}}return e}},{key:"plotData",value:function(){var e=this.getData();"simple"===this.options.type?this.plotSimpleData(e):"detailed"===this.options.type&&this.plotDetailedData(e)}},{key:"plotSimpleData",value:function(e){for(var t=null,i=0;i<e.length;i++){var n=e[i];if(null!==n){var a=this.width/(e.length-1),s=new f(a*i,this.height*(n-this.minY)/(this.maxY-this.minY));this.drawPoint(s,this.options.colour),i>0&&null!==t&&this.drawLine(t,s,this.options.colour),t=s}else t=null}}},{key:"draw",value:function(e,t,i,n,a,s){var r=new f(t*i,this.height*(n-this.minY)/(this.maxY-this.minY));return s&&this.drawPoint(r,e),i>0&&null!==a&&this.drawLine(a,r,e),r}},{key:"plotDetailedData",value:function(e){var t=new A(this.options.colour),i=t.desaturate(.3);i=i.darken(.2);var n=t.desaturate(.7);n=n.darken(.2);for(var a=e.length,s=null,r=null,o=null,c=null,l=null,u=0;u<a;u++){var h=e[u];if(null!==h){var d=this.width/(a-1);s=this.draw(this.options.colour,d,u,h.average,s,!0),r=this.draw(n.hex,d,u,h.min,r,!1),o=this.draw(n.hex,d,u,h.max,o,!1);var v=this.draw(i.hex,d,u,h.average-h.standardDeviation,c,!1),p=this.draw(i.hex,d,u,h.average+h.standardDeviation,l,!1);if(u>0&&null!==v&&null!==p&&null!==c&&null!==l){var m=v.x-c.x,g=Math.min(l.y,p.y)-Math.max(c.y,v.y),b=new f(c.x,Math.max(c.y,v.y));this.drawRect(b,m,g,i.hex);var x=new f(l.x,Math.min(p.y,l.y));l.y>p.y?this.drawTrangle(x,m,l.y-p.y,i.hex,"bottom-left"):this.drawTrangle(x,m,p.y-l.y,i.hex,"bottom-right");var y=new f(l.x,Math.min(v.y,c.y));c.y>v.y?this.drawTrangle(y,m,c.y-v.y,i.hex,"top-right"):this.drawTrangle(y,m,v.y-c.y,i.hex,"top-left")}l=p,c=v}}}},{key:"createAxisMeasurement",value:function(e){var t=document.createElement("div");t.className="measurement",this.element.appendChild(t);return t.innerHTML=y(e,1).toString(),t}},{key:"createAxes",value:function(){for(var e=0;e<this.xAxisMeasurements;e++){var t=this.time/this.xAxisMeasurements*e/ke.tps;"minutes"===this.timeUnit&&(t/=60);var i=this.createAxisMeasurement(t);i.classList.add("x"),i.style.left=this.width/this.xAxisMeasurements*e*(this.xAxisMeasurements+1)/this.xAxisMeasurements+"px"}for(var n=0;n<7;n++){var a=this.minY+n*(this.maxY-this.minY)/6,s=this.createAxisMeasurement(a);s.classList.add("y"),s.style.bottom=this.height/6*n+"px"}}},{key:"createLabels",value:function(){var e=document.createElement("div");e.className="label x-label",this.element.appendChild(e),"seconds"===this.timeUnit?e.innerHTML="Seconds":"minutes"===this.timeUnit&&(e.innerHTML="Minutes");var t=document.createElement("div");t.className="label y-label",this.element.appendChild(t);var i=this.options.dependentVariable;t.innerHTML=i}}]),e}(),Z=i(0),$=function(e){var t=e.name,i=e.text,a=e.defaultValue,s=e.func,r=Object(n.useRef)(null),o=Object(n.useState)(a),c=Object(d.a)(o,2),l=c[0],u=c[1],h="_INPUT_"+t,f="input-checkbox ".concat(l?"selected":"");return Object(Z.jsxs)("div",{className:f,children:[Object(Z.jsx)("input",{ref:r,onChange:function(){var e=!!Number(r.current.checked);s(e,r.current),u(e)},type:"checkbox",id:h,defaultChecked:a}),Object(Z.jsx)("label",{htmlFor:h,children:i})]})},ee=function(e){var t=e.text,i=e.min,a=e.max,s=e.defaultValue,r=e.step,o=e.func,c=e.button,l=e.hasExtremeMode,u=Object(n.useRef)(null),h=Object(n.useState)(s),f=Object(d.a)(h,2),v=f[0],p=f[1],m="input-range  ".concat(!!l&&v>=a?"extreme":"");return Object(Z.jsxs)("div",{className:m,children:[Object(Z.jsxs)("div",{className:"formatter",children:[Object(Z.jsx)("div",{className:"text",children:t}),Object(Z.jsxs)("div",{children:[Object(Z.jsx)("div",{className:"value",children:v}),Object(Z.jsxs)("div",{className:"bar-container",children:[Object(Z.jsx)("div",{className:"min",children:i}),Object(Z.jsx)("input",{ref:u,onInput:function(){var e=Number(u.current.value);o&&void 0===c&&o(e),p(e)},type:"range",min:i,max:a,step:r,defaultValue:s}),Object(Z.jsx)("div",{className:"max",children:a})]})]})]}),c?Object(Z.jsx)("button",{onClick:function(){o&&o(v)},children:c}):""]})},te=!1,ie=[{text:"Extrapolate values",type:"checkbox",description:"Reduces the amount of nodes rendered, will significantly reduce lag in extreme scenarios.",defaultValue:!1},{text:"Automatically update",type:"checkbox",defaultValue:!0},{text:"Show points",type:"checkbox",defaultValue:!0},{text:"Show lines",type:"checkbox",defaultValue:!0}],ne=[{display:"Number of creatures",id:"creatures",colour:"#26ff1f",dependentVariable:"Creatures",type:"simple"},{display:"Number of fruit",id:"fruit",colour:"#19c6ff",dependentVariable:"Fruit",type:"simple"}],ae=new Array;function se(){!function(){for(var e=0,t=Object.entries(G);e<t.length;e++){var i=Object(d.a)(t[e],2),n=i[0],a=i[1];ne.push({display:"Creature ".concat(a.display),id:n,colour:a.colour,dependentVariable:a.display,min:a.min,max:a.max,type:"detailed"})}}(),function(){var e=p("graph-viewer").querySelector(".settings-container"),t=ie.map((function(e,t){var i,n=function(){var t,i=Object(o.a)(ie);try{for(i.s();!(t=i.n()).done;)t.value.requirement,e.text}catch(n){i.e(n)}finally{i.f()}re()},a="graph-setting-".concat(t);switch(e.type){case"checkbox":i=Object(Z.jsx)($,{name:a,text:e.text,defaultValue:e.defaultValue,func:function(t){e.isChecked=t,n()}},t);break;case"range":i=Object(Z.jsx)(ee,{text:e.text,defaultValue:e.defaultValue,min:e.min,max:e.max,step:e.step,func:function(t){e.value=t,n()}},t)}return e.elem=i,i}));r.a.render(t,e)}(),function(){var e,t=Object(o.a)(ie);try{for(t.s();!(e=t.n()).done;){var i=e.value;"checkbox"===i.type&&(i.isChecked=i.defaultValue)}}catch(n){t.e(n)}finally{t.f()}}();var e=p("graph-viewer").querySelector(".options-container"),t=Object(Z.jsx)(Z.Fragment,{children:ne.map((function(e,t){return Object(Z.jsx)($,{name:e.id,text:e.display,defaultValue:!1,func:function(i){if(i){for(var n=!1,a=0;a<ae.length;a++){if(ne.indexOf(ae[a])>t){ae.splice(a,0,e),n=!0;break}}n||ae.push(e)}else{var s=ae.indexOf(e);ae.splice(s,1)}re()}},t)}))});r.a.render(t,e)}function re(){var e=p("graph-viewer").querySelector(".graph-container");if(0!==ae.length){e.innerHTML="";var t,i={shouldExtrapolate:ie[0].isChecked},n=Object(o.a)(ae);try{var a=function(){var n=t.value,a=void 0;"simple"===n.type?a=Oe.map((function(e){return e[n.id]})):"detailed"===n.type&&(a=Oe.map((function(e){return null!==e.genePool?e.genePool[n.id]:null})));var s=new W(350,210,a,i,n);e.appendChild(s.element)};for(n.s();!(t=n.n()).done;)a()}catch(s){n.e(s)}finally{n.f()}}else e.innerHTML="<p>Your graph will appear here once you choose an option.</p>"}var oe,ce=null,le=null;function ue(){if(oe){var e,t=p("board"),i=new Array,n=Object(o.a)(O);try{for(n.s();!(e=n.n()).done;){var a=e.value;i=i.concat(a.filter((function(e){return e instanceof q})))}}catch(v){n.e(v)}finally{n.f()}le=null;var s,r=30,c=Object(o.a)(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=oe.distanceFrom(l.position)-l.size/2;u<r&&(le=l,r=u)}}catch(v){c.e(v)}finally{c.f()}if(function(){var e;null===(e=document.querySelector(".creature.highlighted"))||void 0===e||e.classList.remove("highlighted")}(),null!==le){!function(e){e.element.classList.add("highlighted")}(le);var h=function(e,t,i){var n=document.createElement("div");return n.className="hover-box",n.style.left=t.x+"px",n.style.top=t.y+"px",n.innerHTML=e,i.appendChild(n),n}(le.name,new f(le.position.x,le.position.y+20+le.size/2),t);null!==ce&&ce!==h&&ce.remove(),ce=h,t.classList.add("highlight")}else{var d;t.classList.remove("highlight"),null===(d=ce)||void 0===d||d.remove(),ce=null}}}i(28);var he,de=function(e){for(var t=0;t<e;t++)Q()},fe=function(e,t){ke.boardSize[e]=t,function(){var e=w[0].children.length,t=w.length,i=ke.boardSize.width,n=ke.boardSize.height,a=p("board"),s=i*ke.cellSize;a.style.width="".concat(s,"px");var r=n*ke.cellSize;if(a.style.height="".concat(r,"px"),e!==i)if(i>e)for(var c=i-e,l=function(t){w.forEach((function(i,n){var a=(e+t)*(n+1)+n,s=k();i.appendChild(s),(e+t+n)%2===0?s.classList.add("cell-1"):s.classList.add("cell-2");var r=new Array;O.splice(a,0,r)}))},u=0;u<c;u++)l(u);else for(var h=e-i,d=0;d<h;d++)for(var f=0;f<e;f++){var v,m=(e-d-1)*(f+1),g=O[m],b=Object(o.a)(g);try{for(b.s();!(v=b.n()).done;)v.value.die()}catch(I){b.e(I)}finally{b.f()}O.splice(m,1),w[f].children[e-d-1].remove()}if(t!==n)if(n>t)for(var x=n-t,y=0;y<x;y++){var j=S();a.appendChild(j),w.push(j);for(var A=0;A<i;A++){var N=i*(n+y-1)+A,C=k();j.appendChild(C),(t+y+A)%2===0?C.classList.add("cell-1"):C.classList.add("cell-2");var M=new Array;O.splice(N,0,M)}}else for(var E=t-n,z=0;z<E;z++){w[t-z-1].remove(),w.splice(t-z-1,1);for(var R=i*(t-z-1)-1,T=0;T<i;T++){var L,F=O[R+T],P=Object(o.a)(F);try{for(P.s();!(L=P.n()).done;)L.value.die()}catch(I){P.e(I)}finally{P.f()}}O.splice(R,i)}}()},ve=function(e){ke.timewarp=e},pe=function(){p("control-panel").classList.remove("hidden"),p("expand-icon").classList.add("hidden")},me=function(){p("control-panel").classList.add("hidden"),p("expand-icon").classList.remove("hidden")},ge=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),i=a.a.useState({}),s=Object(d.a)(i,2)[1],r=a.a.useCallback((function(){return s({})}),[]);return Object(n.useEffect)((function(){he=r}),[r]),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)("div",{id:"expand-icon",className:"hidden",onClick:pe,children:[Object(Z.jsxs)("div",{className:"formatter",children:[Object(Z.jsx)("div",{className:"vertical-bar"}),Object(Z.jsx)("div",{className:"horizontal-bar"})]}),Object(Z.jsx)("div",{className:"text",children:"Control Panel"})]}),Object(Z.jsxs)("div",{id:"control-panel",className:"menu",children:[Object(Z.jsx)("div",{className:"collapse-icon",onClick:me,children:Object(Z.jsx)("div",{className:"horizontal-bar"})}),Object(Z.jsx)("h1",{className:"heading",children:"Control Panel"}),Object(Z.jsx)("h2",{className:"subheading",children:"Settings"}),Object(Z.jsx)($,{name:"dark-mode",text:"Dark Mode",defaultValue:!0,func:function(e){return function(e){e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}(e)}}),ke.hasStarted?Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("button",{id:"open-graph-viewer-button",children:"View Graphs"}),Object(Z.jsx)("h2",{className:"subheading",children:"Overview"}),Object(Z.jsxs)("p",{children:["Creatures: ",C.count(q)]}),Object(Z.jsxs)("p",{children:["Fruit: ",C.count(T)]}),Object(Z.jsxs)("p",{children:["Time elapsed: ",y(ke.ticks/20,1)," seconds ",Object(Z.jsxs)("i",{children:["(",ke.ticks," ticks)"]})]}),Object(Z.jsx)("h2",{className:"subheading",children:"Creatures"}),Object(Z.jsx)(ee,{button:"Create",text:"Create creatures",min:1,max:10,defaultValue:1,step:1,func:de}),Object(Z.jsx)("h2",{className:"subheading",children:"World"}),Object(Z.jsxs)("p",{children:["Width: ",Object(Z.jsx)("input",{ref:e,defaultValue:"10",type:"text"})]}),Object(Z.jsxs)("p",{children:["Height: ",Object(Z.jsx)("input",{ref:t,defaultValue:"10",type:"text"})]}),Object(Z.jsx)("button",{onClick:function(){return i=Number(e.current.value),n=Number(t.current.value),void(isNaN(i)?alert("The board width must be a number!"):isNaN(n)?alert("The board height must be a number!"):i<=0?alert("The board width must be a number above 0!"):n<=0?alert("The board height must be a number above 0!"):i%1===0?n%1===0?(fe("width",i),fe("height",n)):alert("The board height must be an integer!"):alert("The board width must be an integer!"));var i,n},children:"Update Board Size"}),Object(Z.jsx)(ee,{text:"Timewarp",min:1,max:10,defaultValue:1,step:1,func:ve,hasExtremeMode:!0})]}):""]})]})},be=function(){return!p("board").classList.contains("hidden")};function xe(){var e=p("board");e.style.top="calc(50% + ".concat(ke.transform.translate.y,"%)"),e.style.left="calc(50% + ".concat(ke.transform.translate.x,"%)"),e.style.transform="translate(-50%, -50%) scale(".concat(ke.transform.zoom,", ").concat(ke.transform.zoom,")")}var ye=function(e){if(be()){var t=ke.transform.translate;switch(e){case"up":t.y+=5;break;case"right":t.x-=5;break;case"down":t.y-=5;break;case"left":t.x+=5}xe()}},je=function(e){if(be()){switch(e){case"in":ke.transform.zoom*=1.15;break;case"out":ke.transform.zoom/=1.15}xe()}};var Ae=[],Oe=new Array,we={fruitSpawnRate:1,creatureMutationRate:1,initialCreatures:10,initialFruit:50,equilibrium:20},ke={hasStarted:!1,isPaused:!1,ticks:0,tps:20,timewarp:1,runTick:function(){var e=this;if(this.isPaused)setTimeout((function(){return e.runTick()}),1e3/this.tps/this.timewarp);else{var t,i=Object(o.a)(Ae);try{for(i.s();!(t=i.n()).done;){(0,t.value)()}}catch(g){i.e(g)}finally{i.f()}if(this.hasStarted){this.ticks++,document.querySelectorAll(".ray").forEach((function(e){return e.remove()}));var n,a=new Array,s=Object(o.a)(O);try{for(s.s();!(n=s.n()).done;){var r,c=n.value,l=Object(o.a)(c);try{for(l.s();!(r=l.n()).done;){var u=r.value;u instanceof q&&a.push(u),u.tick()}}catch(g){l.e(g)}finally{l.f()}}}catch(g){s.e(g)}finally{s.f()}var h,d=Object(o.a)(L);try{for(d.s();!(h=d.n()).done;){h.value.tick()}}catch(g){d.e(g)}finally{d.f()}for(var f=.05*this.settings.fruitSpawnRate,v=0;v<O.length;v++)for(var p=Math.random(),m=0;p<=f/this.tps-m;m++)M(v);he(),ue(),U&&z();this.ticks/this.tps%10===0&&function(e){var t={};if(0===e.length)t=null;else{for(var i={},n=0,a=Object.keys(G);n<a.length;n++)i[a[n]]=new Array;var s,r=Object(o.a)(e);try{for(r.s();!(s=r.n()).done;)for(var c=s.value,l=0,u=Object.keys(i);l<u.length;l++){var h=u[l];i[h].push(c[h])}}catch(g){r.e(g)}finally{r.f()}for(var d=0,f=Object.keys(G);d<f.length;d++){for(var v=f[d],p=i[v],m=p.length,b=Number.MAX_SAFE_INTEGER,x=0,y=0,A=0;A<m;A++){var O=p[A];O<b&&(b=O),O>x&&(x=O),y+=O}y/=m,t[v]={average:y,min:b,max:x,standardDeviation:j(p)}}}var w=C.count(q);0===w&&(w=null);var k=C.count(T);Oe.push({creatures:w,fruit:k,genePool:t}),ie[1].isChecked&&re()}(a)}setTimeout((function(){return e.runTick()}),1e3/this.tps/this.timewarp)}},start:function(){this.hasStarted=!0,this.transform.zoom=25/Math.pow(this.boardSize.width+this.boardSize.height,1.1),xe();for(var e=0;e<this.settings.initialCreatures;e++)Q();for(var t=0;t<this.settings.initialFruit;t++){M(Math.floor(Math.random()*this.boardSize.width*this.boardSize.height))}},createRenderListener:function(e){Ae.push(e)},removeRenderListener:function(e){if(-1===Ae.indexOf(e))throw new Error("No matching function could be found! Name: ".concat(e.name));Ae.push(e)},hasRenderListener:function(e){return Ae.indexOf(e)>=0},boardSize:{width:15,height:15},transform:{zoom:1,translate:new f(0,0)},cellBorderSize:2,cellSize:60,settings:we},Se=[],Ne=function(){function e(){Object(c.a)(this,e),this.element=void 0,this.position=void 0,this.velocity=void 0,this.element=this.createInstance(),this.position=this.getRandomPosition(),this.velocity=this.getRandomVelocity()}return Object(l.a)(e,[{key:"getRandomPosition",value:function(){var e=g(0,90)+5,t=g(0,90)+5- -10;return new f(e,t)}},{key:"getRandomVelocity",value:function(){var e=g(-2,2),t=g(-12,-5);return new f(e,t)}},{key:"createInstance",value:function(){var e=document.createElement("div");e.className="confetti",document.body.appendChild(e);var t=[3,7],i=[5,12],n=g(t[0],t[1]),a=g(i[0],i[1]);e.style.width="".concat(n,"px"),e.style.height="".concat(a,"px");var s=180*Math.random();e.style.transform="rotate(".concat(s,"deg)");var r=b(["red","pink","orange","green","blue"]);return e.style.backgroundColor=r,e}},{key:"updatePosition",value:function(){this.element.style.left="".concat(this.position.x,"%"),this.element.style.top="".concat(this.position.y,"%")}},{key:"tick",value:function(){for(var e=0;e<7;e++)this.position=this.position.lerp(this.position.add(this.velocity),1/ke.tps),this.velocity.y+=.05;(this.position.y>100||this.position.x<0||this.position.x>100)&&this.die(),this.updatePosition()}},{key:"die",value:function(){this.element.remove();var e=Se.indexOf(this);Se.splice(e,1)}}]),e}(),Ce=function(){var e,t=Object(o.a)(Se);try{for(t.s();!(e=t.n()).done;){e.value.tick()}}catch(i){t.e(i)}finally{t.f()}};i(29),i(30);var Me=function(e){var t=e.text;return Object(Z.jsxs)("div",{className:"warning",children:[Object(Z.jsx)("h3",{children:"Warning"}),Object(Z.jsx)("p",{children:t})]})},Ee=function(e){var t=e.text,i=e.defaultValue,a=e.func,s=e.limit,r=Object(n.useRef)(null),o=Object(n.useState)(i),c=Object(d.a)(o,2),l=c[0],u=c[1],h=null;return isNaN(l)?h="The input must be a valid number.":0===l?h="You must have an input value.":l%1!==0?h="The input must be an integer.":s&&l>s&&(h="The input cannot be greater than ".concat(s,".")),Object(Z.jsxs)("div",{className:"input-text",children:[Object(Z.jsxs)("span",{className:"text",children:[t,":"]}),Object(Z.jsx)("input",{ref:r,onInput:function(){var e=Number(r.current.value);a&&a(e),u(e)},type:"text",defaultValue:i}),null!==h?Object(Z.jsx)(Me,{text:h}):""]})};function ze(){p("start-menu").classList.remove("hidden")}var Re=JSON.parse(JSON.stringify(we)),Te=function(){ke.settings=Re,p("start-menu").remove(),N()},Le=function(){return Object(Z.jsx)("div",{id:"start-menu",className:"menu hidden",children:Object(Z.jsxs)("div",{className:"content",children:[Object(Z.jsx)("h1",{className:"heading",children:"Settings"}),Object(Z.jsx)("h2",{className:"subheading",children:"Board Size"}),Object(Z.jsx)("p",{children:"Adjust the size of the environment."}),Object(Z.jsx)(Ee,{func:function(e){return ke.boardSize.width=e},text:"Width",defaultValue:15,limit:100}),Object(Z.jsx)(Ee,{func:function(e){return ke.boardSize.height=e},text:"Height",defaultValue:15,limit:100}),Object(Z.jsx)("h2",{className:"subheading",children:"Initial Population"}),Object(Z.jsx)(ee,{func:function(e){return Re.initialCreatures=e},text:"Creatures",min:0,max:100,step:1,defaultValue:10}),Object(Z.jsx)(ee,{func:function(e){return Re.initialCreatures=e},text:"Fruit",min:0,max:500,step:5,defaultValue:50}),Object(Z.jsx)("h2",{className:"subheading",children:"Modifiers"}),Object(Z.jsx)(ee,{func:function(e){return Re.fruitSpawnRate=e},text:"Fruit spawn rate",min:.5,max:5,step:.5,defaultValue:1,hasExtremeMode:!0}),Object(Z.jsx)(ee,{func:function(e){return Re.creatureMutationRate=e},text:"Creature mutation rate",min:.5,max:3,step:.1,defaultValue:1,hasExtremeMode:!0}),Object(Z.jsx)("h2",{className:"subheading",children:"Other Stuff"}),Object(Z.jsx)("p",{children:"I couldn't figure out where to put these so now this is here."}),Object(Z.jsx)(ee,{func:function(e){return Re.equilibrium=e},text:"Desired equilibrium",min:0,max:100,step:5,defaultValue:20}),Object(Z.jsx)("button",{onClick:Te,children:"Start"})]})})},Fe=function(){var e;null===(e=window.open("https://github.com/eggpoison/creature-simulator","_blank"))||void 0===e||e.focus()},Pe=function(){return Object(Z.jsxs)("div",{id:"titlescreen",children:[Object(Z.jsx)("h1",{children:"Creature Simulator"}),Object(Z.jsxs)("div",{id:"title-options-container",children:[Object(Z.jsx)("button",{onClick:ze,children:"Start"}),Object(Z.jsx)("button",{onClick:function(){return function(e){for(var t=0;t<e;t++)Se.push(new Ne);ke.hasRenderListener(Ce)||ke.createRenderListener(Ce)}(50)},children:"Confetti!"}),Object(Z.jsx)("button",{children:"About"}),Object(Z.jsx)("button",{onClick:Fe,id:"source-code-button",children:"Source Code"})]})]})},Ie=(i(31),i(32),i(33),function(){return Object(Z.jsx)("div",{id:"board",className:"hidden"})}),Be=(i(34),function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),i=t[0],s=t[1],r=a.a.useState({}),o=Object(d.a)(r,2)[1],c=a.a.useCallback((function(){return o({})}),[]);Object(n.useEffect)((function(){E=function(e){s(e)},function(e){z=e}((function(){return c()}))}),[c]);var l=null===i?Object(Z.jsx)(Z.Fragment,{}):Object(Z.jsxs)(Z.Fragment,{children:[" ",Object.entries(G).map((function(e,t){var n=e[1],a=e[0],s=i[a],r=(s-n.min)/(n.max-n.min)*100,o=.5+(s-n.min)/(n.max-n.min)/2;return Object(Z.jsxs)("div",{className:"gene",children:[Object(Z.jsx)("div",{className:"label",children:n.display}),Object(Z.jsxs)("div",{className:"slider",children:[Object(Z.jsx)("div",{style:{width:r+"%",opacity:o,backgroundColor:n.colour},className:"slider-fill"}),Object(Z.jsx)("div",{className:"min",children:n.min}),Object(Z.jsx)("div",{className:"val",children:s}),Object(Z.jsx)("div",{className:"max",children:n.max})]})]},t)}))," "]});return null===i?Object(Z.jsx)(Z.Fragment,{}):Object(Z.jsxs)("div",{id:"creature-inspector",children:[Object(Z.jsx)("h1",{children:"Creature Inspector"}),Object(Z.jsx)("h2",{children:"General"}),Object(Z.jsxs)("div",{className:"panel",children:[Object(Z.jsxs)("p",{children:["Name: ",i.name]}),Object(Z.jsxs)("p",{children:["Age: ",ke.ticks-i.birthTime," ticks (",y((ke.ticks-i.birthTime)/ke.tps,1)," seconds)"]})]}),Object(Z.jsx)("h2",{children:"Stats"}),Object(Z.jsxs)("div",{className:"panel",children:[Object(Z.jsxs)("p",{children:["Generation: ",i.stats.generation]}),Object(Z.jsxs)("p",{children:["Fruit eaten: ",i.stats.fruitEaten]})]}),Object(Z.jsx)("h2",{children:"Genes"}),Object(Z.jsx)("div",{className:"panel",children:l})]})}),Ue=(i(35),i(36),function(){return Object(Z.jsxs)("div",{id:"graph-viewer",className:"menu hidden",children:[Object(Z.jsx)("h1",{className:"heading",children:"View Graphs"}),Object(Z.jsxs)("div",{className:"formatter",children:[Object(Z.jsxs)("div",{className:"options",children:[Object(Z.jsx)("h2",{className:"subheading",children:"Graph Options"}),Object(Z.jsx)("p",{children:"Select which graphs should be shown."}),Object(Z.jsx)("div",{className:"options-container"})]}),Object(Z.jsxs)("div",{className:"settings",children:[Object(Z.jsx)("h2",{className:"subheading",children:"Settings"}),Object(Z.jsx)("p",{children:"Control how the graphs look."}),Object(Z.jsx)("div",{className:"settings-container"})]})]}),Object(Z.jsx)("div",{className:"graph-container",children:Object(Z.jsx)("p",{children:"Your graph will appear here once you choose an option."})})]})}),Ve=function(){return Object(Z.jsx)("div",{id:"pause-screen",className:"hidden",children:Object(Z.jsxs)("hgroup",{children:[Object(Z.jsx)("h1",{children:"Paused!"}),Object(Z.jsxs)("h2",{children:["Press ",Object(Z.jsx)("span",{children:"<space>"})," to unpause."]})]})})};i(37);function De(){p("mask").classList.add("hidden")}function Ge(){p("mask").classList.remove("hidden")}r.a.render(Object(Z.jsxs)(a.a.StrictMode,{children:[Object(Z.jsx)(Pe,{}),Object(Z.jsx)(ge,{}),Object(Z.jsx)(Ie,{}),Object(Z.jsx)(Be,{}),Object(Z.jsx)(Ue,{}),Object(Z.jsx)(Ve,{}),Object(Z.jsx)(Le,{}),Object(Z.jsx)("div",{id:"mask",className:"hidden"})]}),document.getElementById("root"));window.onload=function(){se(),ke.runTick()},document.onmousemove=function(e){var t=e.clientX,i=e.clientY,n=p("board").getBoundingClientRect(),a=n.x,s=n.y;(oe=new f(t-a,i-s)).x<0||oe.x>n.width||oe.y<0||oe.y>n.height||ue()},document.onclick=function(){var e,t=window.event;if("open-graph-viewer-button"===(null===t||void 0===t?void 0:t.target).id)Ge(),p("graph-viewer").classList.remove("hidden"),te=!0;else if(te){if(null===t||void 0===t?void 0:t.composedPath().includes(p("graph-viewer")))return;De(),p("graph-viewer").classList.add("hidden"),te=!1}else null!==le?(U=!0,V=e=le,E(e)):D()},document.onkeydown=function(){var e=window.event.key;if(document.activeElement===document.body)switch(e){case"ArrowUp":ye("up");break;case"ArrowRight":ye("right");break;case"ArrowDown":ye("down");break;case"ArrowLeft":ye("left");break;case"-":case"_":je("out");break;case"+":case"=":je("in");break;case" ":ke.isPaused?(ke.isPaused=!1,p("pause-screen").classList.add("hidden")):(ke.isPaused=!0,p("pause-screen").classList.remove("hidden"))}}}],[[38,1,2]]]);
//# sourceMappingURL=main.ff46e1db.chunk.js.map